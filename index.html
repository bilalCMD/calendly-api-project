<style>
  .calendar-container {
    max-width: 700px;
    margin: 0 auto;
    font-family: 'Arial', sans-serif;
  }
  .calendar-slot {
    display: inline-block;
    padding: 12px 16px;
    margin: 8px;
    background-color: #f0f8ff;
    border: 1px solid #0077cc;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .calendar-slot:hover {
    background-color: #0077cc;
    color: #fff;
  }
  .calendar-slot.booked {
    background-color: #ccc;
    cursor: not-allowed;
    border: 1px solid #aaa;
    color: #666;
  }
  .booking-form {
    display: none;
    margin-top: 20px;
    padding: 20px;
    border: 1px solid #ddd;
    background: #fafafa;
    border-radius: 8px;
  }
  .booking-form input, .booking-form textarea {
    display: block;
    width: 100%;
    margin-bottom: 10px;
    padding: 10px;
  }
</style>

<div class="calendar-container">
  <h2>Select a Time Slot</h2>
  <div id="calendar">
    <!-- Slots will be rendered here -->
  </div>

  <div class="booking-form" id="bookingForm">
    <h3>Book Slot: <span id="selectedSlot"></span></h3>
    <input type="text" id="name" placeholder="Your Name" required>
    <input type="email" id="email" placeholder="Your Email" required>
    <textarea id="notes" placeholder="Additional Notes (optional)"></textarea>
    <button onclick="submitBooking()">Confirm Booking</button>
  </div>
</div>

<script>
  const slots = [
    { id: 1, date: '2025-08-01', time: '10:00 AM', booked: false },
    { id: 2, date: '2025-08-01', time: '11:00 AM', booked: false },
    { id: 3, date: '2025-08-01', time: '12:00 PM', booked: false },
    { id: 4, date: '2025-08-02', time: '02:00 PM', booked: true }, // Booked Example
    { id: 5, date: '2025-08-03', time: '04:00 PM', booked: false }
  ];

  const calendarDiv = document.getElementById('calendar');
  const formDiv = document.getElementById('bookingForm');
  const selectedSlotSpan = document.getElementById('selectedSlot');
  let selectedSlotId = null;

  function renderCalendar() {
    calendarDiv.innerHTML = '';
    slots.forEach(slot => {
      const btn = document.createElement('div');
      btn.className = 'calendar-slot' + (slot.booked ? ' booked' : '');
      btn.innerText = `${slot.date} @ ${slot.time}`;
      if (!slot.booked) {
        btn.onclick = () => openForm(slot);
      }
      calendarDiv.appendChild(btn);
    });
  }

  function openForm(slot) {
    selectedSlotId = slot.id;
    selectedSlotSpan.innerText = `${slot.date} at ${slot.time}`;
    formDiv.style.display = 'block';
  }

  function submitBooking() {
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const notes = document.getElementById('notes').value.trim();

    if (!name || !email) {
      alert('Please fill out name and email.');
      return;
    }

    // Mark slot as booked in frontend
    const slot = slots.find(s => s.id === selectedSlotId);
    if (slot) {
      slot.booked = true;
    }

    // You can send this data to Airtable or Google Sheets via Zapier webhook here
    console.log('Booking Info:', { name, email, notes, slot });

    alert('Slot booked successfully!');
    formDiv.style.display = 'none';
    renderCalendar();
  }

  renderCalendar();
</script>
